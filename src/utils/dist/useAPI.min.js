"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTokenInLocalStorage=exports.Jobs=exports.PostJob=exports.Update=exports.Signin=exports.Signup=void 0;var _axios=_interopRequireDefault(require("./axios")),_asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage")),_native=require("@react-navigation/native");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Signup=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("success"),e.next=4,regeneratorRuntime.awrap(_axios.default.post("api/".concat(r,"/signup"),t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("================"),console.log(e.t0),e.t0;case 13:case"end":return e.stop()}},null,null,[[0,8]])};exports.Signup=Signup;var Signin=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("login"),e.next=4,regeneratorRuntime.awrap(_axios.default.post("api/".concat(r,"/login"),t));case 4:if((n=e.sent).data.token)return e.next=8,regeneratorRuntime.awrap(_asyncStorage.default.setItem("token",n.data.token));e.next=8;break;case 8:return e.abrupt("return",n.data);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},null,null,[[0,11]])};exports.Signin=Signin;var Update=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("update"),e.next=4,regeneratorRuntime.awrap(_asyncStorage.default.getItem("token"));case 4:return n=e.sent,e.next=7,regeneratorRuntime.awrap(_axios.default.post("api/".concat(r,"/update"),t,{headers:{Authorization:"Bearer ".concat(n)}}));case 7:if(200!==(a=e.sent).status){e.next=12;break}if(a.data.token)return e.next=12,regeneratorRuntime.awrap(_asyncStorage.default.setItem("token",a.data.token));e.next=12;break;case 12:return e.abrupt("return",a.data);case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}},null,null,[[0,15]])};exports.Update=Update;var PostJob=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("success"),e.next=4,regeneratorRuntime.awrap(_asyncStorage.default.getItem("token"));case 4:return n=e.sent,e.next=7,regeneratorRuntime.awrap(_axios.default.post("api/".concat(r,"/postJob"),t,{headers:{Authorization:"Bearer ".concat(n)}}));case 7:return a=e.sent,e.abrupt("return",a.data);case 11:throw e.prev=11,e.t0=e.catch(0),console.log("================"),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}},null,null,[[0,11]])};exports.PostJob=PostJob;var Jobs=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_asyncStorage.default.getItem("token"));case 3:return n=e.sent,console.log(n),e.next=7,regeneratorRuntime.awrap(_axios.default.get("api/".concat(t,"/shifts"),{headers:{Authorization:"Bearer ".concat(n),Role:r}}));case 7:if(a=e.sent,console.log(a.data.jobData),200!==a.status){e.next=15;break}if(a.data.token)return e.next=13,regeneratorRuntime.awrap(_asyncStorage.default.setItem("token",a.data.token));e.next=13;break;case 13:e.next=16;break;case 15:401===a.status&&console.log("Token is expired");case 16:return e.abrupt("return",a.data.jobData);case 19:throw e.prev=19,e.t0=e.catch(0),console.log(e.t0),e.t0;case 23:case"end":return e.stop()}},null,null,[[0,19]])};exports.Jobs=Jobs;var isTokenInLocalStorage=function(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_asyncStorage.default.getItem("token"));case 3:return t=e.sent,e.abrupt("return",null!==t);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error checking for token in localstorage:",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},null,null,[[0,7]])};exports.isTokenInLocalStorage=isTokenInLocalStorage;
//# sourceMappingURL=useApi.min.js.map
